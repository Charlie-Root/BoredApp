{% extends "base.html" %}
{% block title %}Favourites{% endblock %}
{% block content %}
<h1>Favourites Page</h1>

     {% with messages = get_flashed_messages(with_categories=true) %}
     {% if messages %}
         {% for category,message in messages %}
         {% if category == "success" %}
             <div class="alert alert-success mb-3 alert-dismissible fade show" role="alert" id="alert-message">
                 {{ message }}
             </div>
         {% endif %}

         {% if category == "error" %}
             <div class="alert alert-danger mb-3 alert-dismissible fade show" role="alert" id="alert-message">
                 {{ message }}
             </div>
         {% endif %}

           <button type="button" class="close" data-dismiss="alert" aria-label="Close">
               <span aria-hidden="true">&times;</span>
           </button>

         <script>
         setTimeout(() => {
             document.getElementById("alert-message").style.opacity = "0";
         }, 1700);
         </script>

         {% endfor %}

     {% endif%}
     {% endwith %}


<h1>{{ session["FirstName"] }}'s favourite activities:</h1>
<ul>
{% for activity_info in users_favourites %}
    <li>
        {{ activity_info[0] }} - {{ activity_info[1] }} participant/s - {{ activity_info[2] }} activity - Â£{{ activity_info[3] }}
        <form action="{{ url_for('delete_favourite', activity_id=activity_info[4]) }}" method="POST">
            <button type="submit">Delete</button>
        </form>
    </li>
{% endfor %}
</ul>
{% endblock %}


